# 更新记录

## 1.0.0
完成了第一个双摇杆可以操作的版本  
左摇杆表示人物移动。由于人物固定在屏幕中心，因此实际操控背景**反向**移动。  
右摇杆处理遮罩finalLight,旋转方向与摇杆方向相一致

下一次更新加入：动画播放效果，能够在移动过程中播放移动动画


## 1.2.0
忘记更新1.1.0了。。。  
实现了移动时的动画播放效果：利用*两次旋转角度差*确定是否需要重新播放新的方向动画

当前问题：  
1. 初始化的人物方向有待调整  
2. 人物移动停止时动画播放不能停止

下一次更新加入：  
1. 幽灵相关


## 1.3.0
本次更新内容：  
1. 加入了幽灵  
2. 加入了幽灵的随机方向移动函数（由毫秒级时间戳做种）  
3. 加入了幽灵与灯光的碰撞检测  
4. 加入了幽灵的四方向移动动画  
5. 加入了幽灵受到照射后的眩晕动画  

幽灵的移动实现思路分为两种。  
第一种是将幽灵挂载在背景节点下，幽灵后续相对于背景移动。（后续更新版本采用此方案）  
第二种是将幽灵节点直接挂载在canvas下，与背景节点平行。由于实际移动的是背景而不是屏幕框，因此需要读取摇杆操作并赋予节点，使得幽灵与背景在同一坐标系下运动。（1.3.0版本暂时采用此方案）

下一次更新加入：  
1. 多方向眩晕动画（等待美工爸爸给图）  
2. 幽灵在一定范围内对人物的追踪能力（考虑利用屏幕坐标系实现）  
3. 四周墙壁的碰撞检测   

## 1.4.0

本次更新内容：  

+ 加入幽灵追踪能力  

基本原理：由于cocos获取的坐标都是 *局部坐标系* ， 因此缺少全局变量进行计算。基本思想有两种，一是全部由世界坐标系或屏幕坐标系计算，二是全部由局部坐标系计算。暂时选择用世界坐标系进行计算。  
步骤如下：  
1. 利用convertToWorldSpaceAR( *nodename* )函数获得人物与幽灵在以人物为参考点的世界坐标系下的坐标。  
2. 计算距离与方向。  
3. 播放移动动画。  


操作放在update函数中时刻更新保证轨迹最优。  
移动速度可在cocos creator右侧属性面板中调整，目前设定与人物速度相同。  
目前尚未加入幽灵的观察策略，仅支持一定范围内自动跟踪。  
眩晕在移开光照后自动回复，未来会加入延时功能。  
当前放入六只幽灵用于测试。  

## 1.5.0  

本次更新内容：  
+ 加入开始界面与结算界面  

## 1.6.0  

本次更新内容：  
+ 第一关地图加入，幽灵加入，陷阱加入（纯粹素材搭建）  

需要完善的内容：  
1. 陷阱动画补全（目前只制作了三帧示意）  
2. 地图边框碰撞  
3. 陷阱边框碰撞  
4. 摇杆图片替换  
5. 整体游戏逻辑调整，加强体验感  

## 3.0.2

本次更新内容：
+ 前两关彻底完善

需要更新的内容：
+ 新关卡